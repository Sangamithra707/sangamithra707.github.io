<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Details | Digital Portfolio</title>
    <link rel="icon" type="image/png" href="assets/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* Detail Page Specific Styles */
        .detail-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: var(--space-xl);
            padding: var(--space-xl) 0;
            height: calc(100vh - 100px);
        }

        .viewer-stage {
            background-color: var(--bg-surface);
            border-radius: 0;
            border: 1px solid rgba(255, 255, 255, 0.05);
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Tech border variables */
            --corner-color: var(--text-primary);
            --corner-size: 16px;
            --corner-width: 2px;
        }

        .viewer-stage::after {
            content: '';
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 10;
            background:
                /* Top Left */
                linear-gradient(to right, var(--corner-color) var(--corner-width), transparent 0) 0 0,
                linear-gradient(to bottom, var(--corner-color) var(--corner-width), transparent 0) 0 0,
                /* Top Right */
                linear-gradient(to left, var(--corner-color) var(--corner-width), transparent 0) 100% 0,
                linear-gradient(to bottom, var(--corner-color) var(--corner-width), transparent 0) 100% 0,
                /* Bottom Left */
                linear-gradient(to right, var(--corner-color) var(--corner-width), transparent 0) 0 100%,
                linear-gradient(to top, var(--corner-color) var(--corner-width), transparent 0) 0 100%,
                /* Bottom Right */
                linear-gradient(to left, var(--corner-color) var(--corner-width), transparent 0) 100% 100%,
                linear-gradient(to top, var(--corner-color) var(--corner-width), transparent 0) 100% 100%;

            background-repeat: no-repeat;
            background-size: var(--corner-size) var(--corner-size);
            opacity: 1;
        }

        #main-viewer {
            width: 100%;
            height: 100%;
        }

        .details-panel {
            overflow-y: auto;
            padding-right: var(--space-xs);
        }

        .detail-header h1 {
            font-size: 2rem;
            margin-bottom: var(--space-xs);
        }

        .detail-category {
            color: var(--accent-primary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.875rem;
            margin-bottom: var(--space-md);
            display: block;
        }

        .specs-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-md);
            margin: var(--space-xl) 0;
            background: var(--bg-surface);
            padding: var(--space-md);
            border-radius: 0;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            /* Tech border variables */
            --corner-color: var(--text-secondary);
            --corner-size: 8px;
            --corner-width: 1px;
        }

        .specs-grid::after {
            content: '';
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 20;
            background:
                linear-gradient(to right, var(--corner-color) var(--corner-width), transparent 0) 0 0,
                linear-gradient(to bottom, var(--corner-color) var(--corner-width), transparent 0) 0 0,
                linear-gradient(to left, var(--corner-color) var(--corner-width), transparent 0) 100% 0,
                linear-gradient(to bottom, var(--corner-color) var(--corner-width), transparent 0) 100% 0,
                linear-gradient(to right, var(--corner-color) var(--corner-width), transparent 0) 0 100%,
                linear-gradient(to top, var(--corner-color) var(--corner-width), transparent 0) 0 100%,
                linear-gradient(to left, var(--corner-color) var(--corner-width), transparent 0) 100% 100%,
                linear-gradient(to top, var(--corner-color) var(--corner-width), transparent 0) 100% 100%;
            background-repeat: no-repeat;
            background-size: var(--corner-size) var(--corner-size);
            opacity: 0.5;
        }

        .spec-item {
            display: flex;
            flex-direction: column;
        }

        .spec-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .spec-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .description {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: var(--space-xl);
        }

        .action-actions {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
            font-weight: 500;
        }

        .back-btn:hover {
            color: var(--text-primary);
        }

        @media (max-width: 900px) {
            .detail-layout {
                grid-template-columns: 1fr;
                height: auto;
            }

            .viewer-stage {
                height: 50vh;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <header class="header">
            <a href="index.html" class="logo">
                <i class="ph-bold ph-cube"></i>
                <span>SANGAMITHRA M</span>
            </a>
            <nav class="nav-links">
                <a href="#" class="nav-link">Contact</a>
            </nav>
        </header>

        <a href="index.html" class="back-btn"><i class="ph-bold ph-arrow-left"></i> Back to Gallery</a>

        <main class="detail-layout" id="detail-app">
            <div class="left-column" style="display: flex; flex-direction: column; gap: 16px;">
                <section class="viewer-stage" style="height: 500px;">

                    <img id="image-viewer"
                        style="display: block; width: 100%; height: 100%; object-fit: contain; padding: 20px;">
                </section>

                <!-- Thumbnails Strip -->
                <div id="thumbnails-strip"
                    style="display: flex; gap: 12px; height: 80px; overflow-x: auto; padding-bottom: 4px;">
                    <!-- 3D Toggle Button -->

                </div>
            </div>

            <section class="details-panel">
                <span class="detail-category" id="d-category">Environment</span>
                <div class="detail-header">
                    <h1 id="d-name">Cyberpunk Kiosk</h1>
                </div>

                <div class="specs-grid">
                    <div class="spec-item">
                        <span class="spec-label">Poly Count</span>
                        <span class="spec-value" id="d-poly">24.5k</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Vertices</span>
                        <span class="spec-value" id="d-vertices">26.1k</span>
                    </div>
                    <!-- <div class="spec-item">
                        <span class="spec-label">Format</span>
                        <span class="spec-value">GLB, FBX</span>
                    </div> -->
                </div>

                <div class="description">
                    <p id="d-desc">High-fidelity 3D asset optimized for real-time rendering engines. Features clean
                        topology, non-overlapping UVs, and PBR textures including Diffuse, Roughness, Normal, and
                        Metallic maps.</p>
                </div>

                <div class="action-actions">

                    <button class="btn" id="marketplace-link"
                        style="border: 1px solid var(--border-subtle); color: var(--text-primary); justify-content: center;">
                        View on MarketPlace
                    </button>
                </div>
            </section>
        </main>
    </div>

    <script type="module">


        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');

        async function initDetail() {
            try {
                const response = await fetch('assets/gallery.json');
                const models = await response.json();
                const data = models.find(m => m.id === id);

                if (data) {
                    document.getElementById('d-name').innerText = data.title;
                    document.getElementById('d-category').innerText = data.category;
                    document.getElementById('d-poly').innerText = data.polyCount;
                    document.getElementById('d-desc').innerText = data.description || 'No description available.';
                    document.title = `${data.title} | 3D Portfolio`;

                    document.getElementById('d-vertices').innerText = data.vertices || '-';

                    // Update Link
                    const linkBtn = document.getElementById('marketplace-link');
                    if (linkBtn && data.marketplaceLink) {
                        linkBtn.onclick = () => window.open(data.marketplaceLink, '_blank');
                    }


                    // --- Gallery / Slider Logic ---
                    const imageViewer = document.getElementById('image-viewer');

                    // Reset UI logic
                    const resetView = () => {
                        imageViewer.style.display = 'none';
                        document.querySelectorAll('.thumb-item').forEach(el => el.style.border = '2px solid transparent');
                    };

                    if (data.images && data.images.length > 0) {
                        const strip = document.getElementById('thumbnails-strip');

                        data.images.forEach(imgUrl => {
                            const thumb = document.createElement('div');
                            thumb.className = 'thumb-item';
                            thumb.style.cssText = `
                                min-width: 80px; height: 100%; 
                                background-image: url('${imgUrl}'); 
                                background-size: cover; background-position: center; 
                                border-radius: 8px; cursor: pointer; border: 2px solid transparent; opacity: 0.7; transition: opacity 0.2s;
                            `;
                            thumb.addEventListener('mouseover', () => thumb.style.opacity = '1');
                            thumb.addEventListener('mouseout', () => { if (imageViewer.src !== window.location.origin + '/' + imgUrl) thumb.style.opacity = '0.7'; });

                            thumb.addEventListener('click', () => {
                                resetView();
                                imageViewer.style.display = 'block';
                                imageViewer.src = imgUrl;
                                thumb.style.borderColor = 'var(--accent-primary)';
                                thumb.style.opacity = '1';
                            });
                            strip.appendChild(thumb);
                        });

                        // For testing: since 3D is disabled, auto-click the first image
                        if (strip.children.length > 0) {
                            const firstImageThumb = strip.children[0];
                            if (firstImageThumb) firstImageThumb.click();
                        }
                    }
                } else {
                    document.querySelector('.detail-layout').innerHTML = "<h1>Model not found</h1>";
                }
            } catch (e) {
                console.error("Error loading model details", e);
            }
        }

        document.addEventListener('DOMContentLoaded', initDetail);
    </script>
</body>

</html>